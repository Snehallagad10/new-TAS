<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Profile</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --midnight-indigo: #212842;
  --pearl-ivory: #F5F0E6;
  --text-dark: #1A1A1A;
}

body {
  font-family: 'Poppins', sans-serif;
  background: var(--pearl-ivory);
  margin: 0; padding: 0;
  color: var(--text-dark);
}

.navbar {
  background: var(--midnight-indigo);
  color: var(--pearl-ivory);
  padding: 12px 20px;
  display: flex;
  align-items: center;
  font-weight: 600;
  box-shadow: 0 4px 10px rgba(33,40,66,0.25);
}
.hamburger { font-size: 24px; cursor: pointer; margin-right: 15px; }
.brand { font-size: 1.2rem; letter-spacing: 1px; }

.sidebar {
  position: fixed; top: 0; left: -250px; width: 250px; height: 100%;
  background: var(--midnight-indigo); padding-top: 70px; transition: 0.3s;
  z-index: 1000; box-shadow: 4px 0 12px rgba(33,40,66,0.3);
}
.sidebar a {
  display: block; padding: 15px 20px; color: var(--pearl-ivory);
  text-decoration: none; font-weight: 500; transition: 0.3s ease;
}
.sidebar a:hover { background: #2b3358; }

.overlay {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(33,40,66,0.5); display: none; z-index: 900;
}

.profile-card {
  background: #fff; padding: 2rem; border-radius: 16px;
  box-shadow: 0 6px 18px rgba(33,40,66,0.15);
  max-width: 400px; margin: 6rem auto 3rem auto; text-align: center;
}
.profile-pic { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin-bottom: 1rem; border: 3px solid var(--midnight-indigo); cursor: pointer; }
.student-name { font-size: 1.5rem; font-weight:600; color: var(--midnight-indigo); margin-bottom:0.3rem; }
.student-year { font-size:1rem; color:#555; margin-bottom:1rem; }
.detail-item { margin:0.5rem 0; padding:0.6rem 1rem; background:#f1f1f1; border-radius:10px; display:flex; justify-content:space-between; }
.logout-btn { margin-top:1rem; padding:0.8rem 1.2rem; background:var(--midnight-indigo); color:white; border:none; border-radius:12px; cursor:pointer; width:100%; }
.logout-btn:hover { background:#2b3358; }
</style>
</head>
<body>

<div class="navbar">
  <div class="hamburger" onclick="openSidebar()">â˜°</div>
  <div class="brand">SchedulED</div>
</div>

<div class="sidebar" id="sidebar">
  <a href="/dashboard.html">Dashboard</a>
  <a href="/history.html">Appointment History</a>
  <a href="/profile.html">Profile</a>
</div>
<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<div class="profile-card">
  <img src="student-pic.jpg" alt="Profile Picture" class="profile-pic" id="profilePic">
  <input type="file" id="imageUpload" accept="image/*" style="display:none">
  <h2 class="student-name" id="studentName">Loading...</h2>
  <p class="student-year" id="studentYear">Year</p>
  <div class="detail-item"><span>UID:</span> <span id="uidNumber"></span></div>
  <div class="detail-item"><span>Division:</span> <span id="division"></span></div>
  <div class="detail-item"><span>Email:</span> <span id="email"></span></div>
  <div class="detail-item"><span>Phone:</span> <span id="phone"></span></div>
  <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<script>
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
function openSidebar(){ sidebar.style.left='0'; overlay.style.display='block'; }
function closeSidebar(){ sidebar.style.left='-250px'; overlay.style.display='none'; }

let loggedInStudent = JSON.parse(localStorage.getItem("loggedInStudent"));
if(!loggedInStudent){ alert("No student logged in."); window.location.href="/index.html"; }
else{
  document.getElementById("studentName").textContent = loggedInStudent.fullName;
  document.getElementById("uidNumber").textContent = loggedInStudent.uidNumber;
  document.getElementById("division").textContent = loggedInStudent.division;
  document.getElementById("studentYear").textContent = loggedInStudent.year;
  document.getElementById("email").textContent = loggedInStudent.email;
  document.getElementById("phone").textContent = loggedInStudent.phone;
  if(loggedInStudent.profilePic) document.getElementById("profilePic").src = loggedInStudent.profilePic;
}

const profilePic = document.getElementById("profilePic");
const imageUpload = document.getElementById("imageUpload");
profilePic.addEventListener("click",()=>{ imageUpload.click(); });
imageUpload.addEventListener("change",()=>{
  const file = imageUpload.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = e => { profilePic.src = e.target.result; loggedInStudent.profilePic = e.target.result; localStorage.setItem("loggedInStudent", JSON.stringify(loggedInStudent)); }
    reader.readAsDataURL(file);
  }
});

function logout(){ localStorage.removeItem("loggedInStudent"); window.location.href="/index.html"; }
</script>

</body>
</html>