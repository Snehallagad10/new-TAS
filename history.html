<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Appointment History</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --midnight-indigo: #212842;
  --pearl-ivory: #F5F0E6;
  --text-dark: #1A1A1A;
}

body { font-family: 'Poppins', sans-serif; background: var(--pearl-ivory); margin:0; padding:0; color: var(--text-dark); }

/* Navbar */
.navbar { background: var(--midnight-indigo); color: var(--pearl-ivory); padding: 12px 20px; display:flex; align-items:center; font-weight:600; box-shadow: 0 4px 10px rgba(33,40,66,0.25); }
.hamburger { font-size: 24px; cursor: pointer; margin-right: 15px; }
.brand { font-size: 1.2rem; letter-spacing:1px; }

/* Sidebar */
.sidebar { position: fixed; top:0; left:-250px; width:250px; height:100%; background: var(--midnight-indigo); padding-top:70px; transition:0.3s; z-index:1000; box-shadow: 4px 0 12px rgba(33,40,66,0.3); }
.sidebar a { display:block; padding:15px 20px; color: var(--pearl-ivory); text-decoration:none; font-weight:500; transition:0.3s ease; }
.sidebar a:hover { background: #2b3358; }

/* Overlay */
.overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(33,40,66,0.5); display:none; z-index:900; }

/* Page */
.page { display:none; padding:30px; }
.page.active { display:block; animation: fadeIn 0.5s ease-in-out; }

/* Cards */
.card { background:#fff; padding:2rem; border-radius:16px; box-shadow:0 6px 18px rgba(33,40,66,0.15); max-width:600px; margin:auto; text-align:center; }
.card h2 { color: var(--midnight-indigo); margin-bottom:1rem; font-size:1.6rem; font-weight:700; }
.teacher-card { background:#f9f9f9; padding:15px; border-radius:12px; box-shadow: 0 4px 12px rgba(33,40,66,0.1); margin-top:15px; text-align:left; }
.teacher-card div, .teacher-card small { margin:4px 0; }

@keyframes fadeIn { from {opacity:0; transform:translateY(15px);} to {opacity:1; transform:translateY(0);} }
</style>
</head>
<body>

<div class="navbar">
  <div class="hamburger" onclick="openSidebar()">â˜°</div>
  <div class="brand">SchedulED</div>
</div>

<div class="sidebar" id="sidebar">
  <a href="/dashboard.html">Dashboard</a>
  <a href="/history.html">Appointment History</a>
  <a href="/profile.html">Profile</a>
</div>
<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<div id="history" class="page active">
  <div class="card">
    <h2>Appointment History</h2>
    <p>No history yet.</p>
  </div>
</div>

<script>
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');

function openSidebar(){ sidebar.style.left='0'; overlay.style.display='block'; }
function closeSidebar(){ sidebar.style.left='-250px'; overlay.style.display='none'; }

function loadHistory(){
  const card = document.querySelector('#history .card');
  const appointments = JSON.parse(localStorage.getItem('appointments')) || [];
  const teachers = JSON.parse(localStorage.getItem('teachers')) || [];
  if(!appointments.length){ card.innerHTML = `<h2>Appointment History</h2><p>No history yet.</p>`; return; }
  card.innerHTML = `<h2>Appointment History</h2>`;
  appointments.slice().reverse().forEach(app => {
    const teacher = teachers.find(t=>t.name===app.teacherName);
    const labText = teacher && teacher.lab ? ` (Lab ${teacher.lab})` : '';
    const div = document.createElement('div');
    div.className = 'teacher-card';
    div.innerHTML = `
      <div><b>Teacher:</b> ${app.teacherName}${labText}</div>
      <div><b>Student:</b> ${app.studentName}</div>
      <div><b>Class-Div:</b> ${app.classDiv}</div>
      <div><b>Reason:</b> ${app.reason}</div>
      <small><b>Date:</b> ${app.date}</small>
    `;
    card.appendChild(div);
  });
}

loadHistory();
</script>

</body>
</html>